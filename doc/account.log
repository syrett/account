-- 专门作为数据库修改记录，具体数据库结构请看manage项目
-- stock 添加销售字段 订单号 order_no_sale
-- 添加了数据库表 product 销售 purchase 采购 stock 货品 bank 银行 cash 现金，

CREATE TABLE IF NOT EXISTS `bank` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `target` varchar(512) DEFAULT NULL COMMENT '交易对象',
  `date` varchar(64) DEFAULT NULL COMMENT '日期',
  `memo` text COMMENT '说明',
  `amount` float NOT NULL COMMENT '金额',
  `parent` int(11) DEFAULT NULL COMMENT '父，相关',
  `order` text COMMENT '订单号',
  `subject` varchar(16) DEFAULT NULL COMMENT '科目',
  `subject_2` int(12) DEFAULT NULL,
  `invoice` tinyint(4) DEFAULT '0' COMMENT '有无发票',
  `tax` int(8) DEFAULT NULL COMMENT '税率',
  `status_id` tinyint(4) NOT NULL DEFAULT '0' COMMENT '1:已经生成凭证 ',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `status_id` (`status_id`),
  KEY `created_at` (`created_at`),
  KEY `updated_at` (`updated_at`),
  KEY `parent` (`parent`),
  KEY `sbj_bank` (`subject_2`),
  KEY `sbj_bank_2` (`subject_2`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=378 ;

-- --------------------------------------------------------

--
-- 表的结构 `cash`
--

CREATE TABLE IF NOT EXISTS `cash` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `target` varchar(512) DEFAULT NULL COMMENT '交易对象',
  `date` varchar(64) DEFAULT NULL COMMENT '日期',
  `memo` text COMMENT '说明',
  `amount` float NOT NULL COMMENT '金额',
  `parent` int(11) DEFAULT NULL COMMENT '父，相关',
  `order` text COMMENT '订单号',
  `subject` varchar(16) DEFAULT NULL COMMENT '科目',
  `subject_2` int(12) DEFAULT NULL,
  `invoice` tinyint(4) DEFAULT '0' COMMENT '有无发票',
  `tax` int(8) DEFAULT NULL COMMENT '税率',
  `status_id` tinyint(4) NOT NULL DEFAULT '0' COMMENT '1:已经生成凭证 ',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `status_id` (`status_id`),
  KEY `created_at` (`created_at`),
  KEY `updated_at` (`updated_at`),
  KEY `parent` (`parent`),
  KEY `sbj_bank` (`subject_2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `product` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` int(11) NOT NULL COMMENT '订单号',
  `saled_date` int(11) NOT NULL COMMENT '销售日期',
  `client_id` int(11) NOT NULL COMMENT '客户ID',
  `product` varchar(512) NOT NULL COMMENT '商品名称',
  `price` float NOT NULL COMMENT '价格',
  `amount` int(11) NOT NULL,
  `unit` varchar(32) NOT NULL COMMENT '单位',
  `tax` int(11) NOT NULL COMMENT '税率',
  `paied` float NOT NULL COMMENT '已收金额',
  `subject` int(11) DEFAULT NULL,
  `subject_2` int(11) DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` int(11) NOT NULL,
  `status_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `client_id` (`client_id`),
  KEY `subject_2` (`subject_2`),
  KEY `subject` (`subject`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- 表的结构 `purchase`
--

CREATE TABLE IF NOT EXISTS `purchase` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(16) NOT NULL COMMENT '订单号',
  `entry_date` varchar(16) NOT NULL COMMENT '采购日期',
  `vendor_id` int(11) NOT NULL COMMENT '供应商ID',
  `entry_name` varchar(512) NOT NULL COMMENT '商品名称',
  `entry_memo` varchar(1024) DEFAULT NULL,
  `price` float NOT NULL COMMENT '价格',
  `count` int(11) NOT NULL DEFAULT '1',
  `unit` varchar(32) DEFAULT NULL COMMENT '单位',
  `tax` int(11) NOT NULL COMMENT '税率',
  `paied` float NOT NULL COMMENT '已付金额',
  `subject` int(11) DEFAULT NULL,
  `subject_2` int(11) DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` int(11) NOT NULL,
  `status_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `vendor_id` (`vendor_id`),
  KEY `subject` (`subject`,`subject_2`),
  KEY `subject_2` (`subject_2`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

-- --------------------------------------------------------

--
-- 表的结构 `stock`
--

CREATE TABLE IF NOT EXISTS `stock` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `no` varchar(64) NOT NULL COMMENT '编号',
  `order_no` varchar(16) NOT NULL COMMENT '采购订单',
  `order_no_sale` varchar(16) NOT NULL COMMENT '销售订单',
  `name` varchar(512) NOT NULL COMMENT '名字',
  `vendor_id` int(11) DEFAULT NULL COMMENT '供应商',
  `client_id` int(11) DEFAULT NULL COMMENT '销售动向，客户ID',
  `in_date` varchar(16) NOT NULL COMMENT '日期',
  `in_price` float NOT NULL COMMENT '价格',
  `out_date` timestamp NULL DEFAULT NULL,
  `out_price` float DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT '1:正常，2出库，3退货',
  PRIMARY KEY (`id`),
  KEY `vendor_id` (`vendor_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=26 ;

-- transition 添加字段
alter table `transition`
  ADD COLUMN `data_type` varchar(16) default NULL COMMENT '类型' after `entry_date`,
  ADD COLUMN `data_id` int(11) NOT NULL COMMENT '原始数据ID' after `entry_date`,
  ADD COLUMN `entry_name` varchar(512) NOT NULL COMMENT '交易方名称' after `entry_date`;

-- employee 添加职位字段
alter table `employee`
    ADD COLUMN `position` varchar(32) default NULL Comment '职位' after department_id;

-- 添加视图
DROP TABLE IF EXISTS `condomdate`;

CREATE ALGORITHM=UNDEFINED SQL SECURITY DEFINER VIEW `condomdate` AS select max(`transition`.`entry_num_prefix`) AS `date` from `transition` where (`transition`.`entry_closing` = 1);

-- 添加表关系

ALTER TABLE `product`
  ADD CONSTRAINT `product_ibfk_1` FOREIGN KEY (`client_id`) REFERENCES `client` (`id`),
  ADD CONSTRAINT `product_ibfk_2` FOREIGN KEY (`subject`) REFERENCES `subjects` (`sbj_number`),
  ADD CONSTRAINT `product_ibfk_3` FOREIGN KEY (`subject_2`) REFERENCES `subjects` (`sbj_number`);

--
-- 限制表 `purchase`
--
ALTER TABLE `purchase`
  ADD CONSTRAINT `purchase_ibfk_1` FOREIGN KEY (`vendor_id`) REFERENCES `vendor` (`id`),
  ADD CONSTRAINT `purchase_ibfk_2` FOREIGN KEY (`subject`) REFERENCES `subjects` (`sbj_number`),
  ADD CONSTRAINT `purchase_ibfk_3` FOREIGN KEY (`subject_2`) REFERENCES `subjects` (`sbj_number`);

--
-- 限制表 `stock`
--
ALTER TABLE `stock`
  ADD CONSTRAINT `stock_ibfk_1` FOREIGN KEY (`vendor_id`) REFERENCES `vendor` (`id`) ON DELETE SET NULL,
  ADD CONSTRAINT `stock_ibfk_2` FOREIGN KEY (`client_id`) REFERENCES `client` (`id`) ON DELETE SET NULL;
--
-- 限制表 `bank`
--
ALTER TABLE `bank`
  ADD CONSTRAINT `bank_ibfk_1` FOREIGN KEY (`subject_2`) REFERENCES `subjects` (`sbj_number`);

--
-- 限制表 `cash`
--
ALTER TABLE `cash`
  ADD CONSTRAINT `cash_ibfk_1` FOREIGN KEY (`subject_2`) REFERENCES `subjects` (`sbj_number`);

-- 2015年7月22日19:44:15
-- stock 添加entry_subject cost_role成本计算方法
ALTER TABLE `stock` ADD `entry_subject` INT NULL AFTER `name`;
ALTER TABLE `stock` ADD `cost_role` INT NULL COMMENT '成本计算方法' AFTER `create_time`;
ALTER TABLE `stock` ADD FOREIGN KEY (`entry_subject`) REFERENCES `subjects`(`sbj_number`) ON DELETE RESTRICT ON UPDATE RESTRICT;

-- 新建表cost，成本结转


CREATE TABLE IF NOT EXISTS `cost` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(16) NOT NULL COMMENT '订单号',
  `entry_date` varchar(16) NOT NULL COMMENT '销售日期',
  `entry_name` varchar(512) NOT NULL COMMENT '商品名称',
  `stocks` varchar(512) NOT NULL COMMENT '商品清单',
  `stocks_count` varchar(512) NOT NULL COMMENT '对应数量',
  `stocks_price` varchar(512) NOT NULL COMMENT '对应当时计算价格',
  `entry_amount` float NOT NULL COMMENT '成本',
  `subject` int(11) DEFAULT NULL,
  `subject_2` varchar(11) DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` int(11) NOT NULL,
  `status_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `subject_2` (`subject_2`),
  KEY `subject` (`subject`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;

--
-- 限制表 `cost`
--
ALTER TABLE `cost`
  ADD CONSTRAINT `cost_ibfk_2` FOREIGN KEY (`subject`) REFERENCES `subjects` (`sbj_number`) ON DELETE NO ACTION;
-- bank cash 添加 订单号字段
ALTER TABLE `bank` ADD `order_no` VARCHAR(16) NULL after id;
ALTER TABLE `cash` ADD `order_no` VARCHAR(16) NULL after id;



-- 2015年7月28日13:55:16
ALTER TABLE `purchase` ADD `department_id` INT NULL COMMENT '如果是公司自己使用，比如固定资产，需要填写部门' AFTER `entry_memo`;
ALTER TABLE `purchase` ADD INDEX(`department_id`);
ALTER TABLE `purchase` ADD FOREIGN KEY (`department_id`) REFERENCES `department`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
-- 修改stock表 字段，固定资产编码
ALTER TABLE `stock` CHANGE `no` `hs_no` VARCHAR(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '编号';

ALTER TABLE `cost` CHANGE `subject_2` `subject_2` VARCHAR(11) NULL DEFAULT NULL;
ALTER TABLE `options` CHANGE `entrynum` `value` FLOAT NOT NULL DEFAULT '0';
ALTER TABLE `options` CHANGE `id` `id` INT(11) NOT NULL AUTO_INCREMENT;
ALTER TABLE `options` ADD `entry_subject` INT(16) NOT NULL AFTER `id`;
DELETE FROM `options` WHERE 1;
ALTER TABLE `options` ADD INDEX(`entry_subject`);
ALTER TABLE `options` ADD FOREIGN KEY (`entry_subject`) REFERENCES `subjects`(`sbj_number`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `options` CHANGE `url` `year` INT(16) NOT NULL DEFAULT 0 COMMENT '折旧或摊销年限';
ALTER TABLE `stock` ADD `worth` FLOAT NULL COMMENT '净值' AFTER `out_price`;
alter table options drop primary key;
ALTER TABLE `options` ADD PRIMARY KEY(`entry_subject`);
ALTER TABLE `stock` CHANGE `in_price` `in_price` DECIMAL(12,2) NOT NULL COMMENT '价格', CHANGE `out_price` `out_price` DECIMAL(12,2) NULL DEFAULT NULL, CHANGE `worth` `worth` DECIMAL(12,2) NULL DEFAULT NULL COMMENT '净值';


-- 2015年8月4日14:58:22
CREATE TABLE IF NOT EXISTS `salary` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(16) NOT NULL COMMENT '订单号',
  `entry_date` varchar(16) NOT NULL COMMENT '销售日期',
  `employee_id` int(11) NOT NULL COMMENT '员工ID',
  `salary_amount` decimal(12,2) NOT NULL COMMENT '工资',
  `bonus_amount` decimal(12,2) NOT NULL COMMENT '奖金',
  `benefit_amount` decimal(12,2) NOT NULL COMMENT '其他福利',
  `base_amount` decimal(12,2) DEFAULT NULL COMMENT '当时社保基数',
  `social_personal` decimal(12,2) DEFAULT NULL COMMENT '社保个人部分',
  `provident_personal` decimal(12,2) DEFAULT NULL COMMENT '公积金个人部分',
  `personal_tax` decimal(12,2) DEFAULT NULL COMMENT '个人所得税',
  `social_company` decimal(12,2) DEFAULT NULL COMMENT '社保公司部分',
  `provident_company` decimal(12,2) DEFAULT NULL COMMENT '公积金公司部分',
  `subject` int(11) DEFAULT NULL,
  `subject_2` varchar(512) DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` int(11) NOT NULL,
  `status_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `subject_2` (`subject_2`(255)),
  KEY `subject` (`subject`),
  KEY `employee_id` (`employee_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `reimburse` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(16) NOT NULL COMMENT '订单号',
  `entry_date` varchar(16) NOT NULL COMMENT '销售日期',
  `entry_memo` varchar(1024) DEFAULT NULL COMMENT '摘要',
  `employee_id` int(11) NOT NULL COMMENT '员工ID',
  `travel_amount` decimal(12,2) DEFAULT NULL COMMENT '差旅费',
  `benefit_amount` decimal(12,2) DEFAULT NULL COMMENT '福利费（餐费等）',
  `traffic_amount` decimal(12,2) DEFAULT NULL COMMENT '交通费',
  `phone_amount` decimal(12,2) DEFAULT NULL COMMENT '通讯费',
  `entertainment_amount` decimal(12,2) DEFAULT NULL COMMENT '招待费',
  `office_amount` decimal(12,2) DEFAULT NULL COMMENT '办公费',
  `rent_amount` decimal(12,2) DEFAULT NULL COMMENT '租金',
  `watere_amount` decimal(12,2) DEFAULT NULL COMMENT '水电费',
  `train_amount` decimal(12,2) DEFAULT NULL COMMENT '培训费',
  `service_amount` decimal(12,2) DEFAULT NULL COMMENT '服务费',
  `stamping_amount` decimal(12,2) DEFAULT NULL COMMENT '印花税',
  `subject` int(11) DEFAULT NULL,
  `subject_2` varchar(11) DEFAULT NULL,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` int(11) NOT NULL,
  `status_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `subject_2` (`subject_2`),
  KEY `subject` (`subject`),
  KEY `employee_id` (`employee_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

ALTER TABLE `reimburse`
  ADD CONSTRAINT `reimburse_ibfk_1` FOREIGN KEY (`employee_id`) REFERENCES `employee` (`id`),
  ADD CONSTRAINT `reimburse_ibfk_2` FOREIGN KEY (`subject`) REFERENCES `subjects` (`sbj_number`);

ALTER TABLE `salary`
  ADD CONSTRAINT `salary_ibfk_1` FOREIGN KEY (`subject`) REFERENCES `subjects` (`sbj_number`),
  ADD CONSTRAINT `salary_ibfk_2` FOREIGN KEY (`employee_id`) REFERENCES `employee` (`id`);

ALTER TABLE `employee` ADD `base` FLOAT NULL COMMENT '社保基数' AFTER `position`;
ALTER TABLE `stock` ADD `enable_date` DATE NULL COMMENT '固定资产等折旧起始日期,即物品开始使用的日期' AFTER `out_price`;
ALTER TABLE `cost` CHANGE `subject_2` `subject_2` VARCHAR(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
ALTER TABLE `purchase` DROP FOREIGN KEY `purchase_ibfk_3`;
ALTER TABLE `purchase` CHANGE `subject_2` `subject_2` VARCHAR(512) NULL DEFAULT NULL;
ALTER TABLE `product` DROP FOREIGN KEY `product_ibfk_3`;
ALTER TABLE `product` CHANGE `subject_2` `subject_2` VARCHAR(512) NULL DEFAULT NULL;

-- 2015年8月19日15:09:11
ALTER TABLE `employee` ADD `departure_date` DATETIME NULL COMMENT '离职日期' AFTER `department_id`;
ALTER TABLE `employee` ADD `status` INT NOT NULL DEFAULT '1' COMMENT '0离职，1正常，2停职，3兼职' ;
ALTER TABLE `reimburse` DROP FOREIGN KEY `reimburse_ibfk_2`;
ALTER TABLE `reimburse` CHANGE `subject` `subject` VARCHAR(512) NULL DEFAULT NULL;
ALTER TABLE `reimburse` CHANGE `subject_2` `subject_2` VARCHAR(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
ALTER TABLE `product` CHANGE `saled_date` `entry_date` INT(11) NOT NULL COMMENT '销售日期';
ALTER TABLE `product` CHANGE `product` `entry_name` VARCHAR(512) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商品名称';
ALTER TABLE `product` ADD `entry_memo` VARCHAR(1024) NULL AFTER `entry_name`;
ALTER TABLE `product` CHANGE `amount` `count` INT(11) NOT NULL;
ALTER TABLE `product`
CHANGE `order_no` `order_no` VARCHAR(16) NOT NULL COMMENT '订单号',
CHANGE `entry_date` `entry_date` VARCHAR(16) NOT NULL COMMENT '销售日期',
CHANGE `count` `count` INT(11) NOT NULL DEFAULT '1';

ALTER TABLE `cash`
ADD `type` VARCHAR(16) NULL DEFAULT NULL COMMENT '类型：采购、销售、工资、报销等' AFTER `order_no`,
ADD `pid` INT NOT NULL COMMENT '采购、销售、报销、工资等' AFTER `type`;
ALTER TABLE `cash` DROP `order`;
ALTER TABLE `cash` ADD `path` VARCHAR(1024) NOT NULL COMMENT '路径' AFTER `tax`;

ALTER TABLE `bank`
ADD `type` VARCHAR(16) NULL DEFAULT NULL COMMENT '类型：采购、销售、工资、报销等' AFTER `order_no`,
ADD `pid` INT NOT NULL COMMENT '采购、销售、报销、工资等' AFTER `type`;
ALTER TABLE `bank` DROP `order`;
ALTER TABLE `bank` ADD `path` VARCHAR(1024) NOT NULL COMMENT '路径' AFTER `tax`;

ALTER TABLE `reimburse` ADD `paid` VARCHAR(1024) NULL COMMENT '已经报销的项目' AFTER `update_time`;

INSERT INTO `subjects` (`sbj_number`, `sbj_name`, `sbj_cat`, `sbj_table`, `has_sub`, `balance_set`, `start_balance`) VALUES
(160101, '电子设备', '1', NULL, 0, 0, 0),
(160102, '办公设备', '1', NULL, 0, 0, 0),
(160103, '运输设备', '1', NULL, 0, 0, 0),
(160104, '生产设备', '1', NULL, 0, 0, 0),
(160105, '房屋建筑物', '1', NULL, 0, 0, 0);
TRUNCATE options;
INSERT INTO `options` (`id`, `entry_subject`, `name`, `support`, `year`, `value`) VALUES
(1, 1701, NULL, NULL, 10, 5),
(2, 1801, NULL, NULL, 5, 5),
(3, 160101, NULL, NULL, 3, 5),
(4, 160102, NULL, NULL, 5, 5),
(5, 160103, NULL, NULL, 4, 5),
(6, 160104, NULL, NULL, 10, 5),
(7, 160105, NULL, NULL, 20, 5);

CREATE TABLE IF NOT EXISTS `preparation` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_no` varchar(64) NOT NULL,
  `real_order`  VARCHAR(64) NOT NULL,
  `pid` int(11) NOT NULL COMMENT '现金或银行的id',
  `type` varchar(16) NOT NULL COMMENT '现金或银行',
  `memo` text,
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

ALTER TABLE `stock` ADD `value_year` INT NULL COMMENT '报销年限' AFTER `create_time`,
ADD `value_rate` INT NULL COMMENT '残值率' AFTER `value_year`;
ALTER TABLE `preparation` ADD `entry_amount` FLOAT NOT NULL AFTER `type`;
ALTER TABLE `stock` CHANGE `worth` `worth` TEXT NULL DEFAULT NULL COMMENT '净值';


-- 2015年9月8日16:57:49

INSERT INTO `subjects` (`sbj_number`, `sbj_name`, `sbj_cat`, `sbj_table`, `has_sub`, `balance_set`, `start_balance`) VALUES
(222103, '城建税', '2', NULL, 0, 0, 0),
(222104, '教育附加税', '2', NULL, 0, 0, 0),
(222105, '地方教育费附加', '2', NULL, 0, 0, 0),
(224105, '河道管理费', '2', NULL, 0, 0, 0);

ALTER TABLE `bank` ADD `relation` TEXT NOT NULL AFTER `tax`;
ALTER TABLE `cash` ADD `relation` TEXT NOT NULL AFTER `tax`;
ALTER TABLE `purchase` ADD `relation` TEXT NOT NULL AFTER `subject_2`;
ALTER TABLE `product` ADD `relation` TEXT NOT NULL AFTER `subject_2`;
ALTER TABLE `reimburse` ADD `relation` TEXT NOT NULL AFTER `subject_2`;

-- 2015年9月11日15:30:19
ALTER TABLE `preparation` ADD `amount_used` FLOAT NOT NULL COMMENT '已使用金额' AFTER `entry_amount`;
ALTER TABLE `preparation` CHANGE `real_order` `real_order` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;

-- 2015年9月26日16:06:59
ALTER TABLE `employee` ADD `base_2` FLOAT NOT NULL COMMENT '公积金基数' AFTER `base`;
ALTER TABLE `stock` ADD `model` VARCHAR(64) NULL COMMENT '型号' AFTER `name`;
ALTER TABLE `purchase` ADD `model` VARCHAR(64) NULL COMMENT '型号' AFTER `entry_name`;
ALTER TABLE `stock` CHANGE `value_year` `value_month` INT(11) NULL DEFAULT NULL COMMENT '报销年限';
ALTER TABLE `stock` CHANGE `value_rate` `value_rate` INT(11) NOT NULL DEFAULT '0' COMMENT '残值率';
ALTER TABLE `stock` CHANGE `order_no` `order_no` VARCHAR(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '采购订单';

-- 2015年10月10日15:22:04
ALTER TABLE `stock` ADD `cost_date` VARCHAR(64) NOT NULL DEFAULT '' COMMENT '成本结转日期' AFTER `cost_role`;
ALTER TABLE `cost` ADD `model` VARCHAR(64) NOT NULL DEFAULT '' AFTER `entry_name`;
ALTER TABLE `cost` ADD `count` FLOAT NOT NULL AFTER `model`;
ALTER TABLE `stock` ADD `department_id` INT NOT NULL COMMENT '所属部门' AFTER `client_id`;

-- 2015年10月27日16:56:36
-- 删除科目
DELETE FROM `subjects` WHERE `sbj_number` in
(1003,1021,1031,1111,1201,1211,1212,1301,1302,1303,1304,1311,1321,1411,1421,1431,1441,1451,1532,1541,1611,1621,1622,1623,1631,1632,1821,
2002,2003,2004,2011,2012,2021,2111,2251,2261,2311,2312,2313,2314,2601,2602,2611,2621,2702);
ALTER TABLE `cash` ADD `name` VARCHAR(512) NOT NULL AFTER `target`;
ALTER TABLE `bank` ADD `name` VARCHAR(512) NOT NULL AFTER `target`;
ALTER TABLE `cash` ADD `department_id` INT NOT NULL AFTER `name`;
ALTER TABLE `bank` ADD `department_id` INT NOT NULL AFTER `name`;
ALTER TABLE `cash` ADD `overworth` float NOT NULL COMMENT '溢价' AFTER `tax`;
ALTER TABLE `bank` ADD `overworth` float NOT NULL COMMENT '溢价' AFTER `tax`;

-- 2015年11月3日15:10:33

ALTER TABLE `stock` CHANGE `status` `status` TINYINT(4) NOT NULL DEFAULT '1' COMMENT '1:正常，2出库，3退货，4报废';
update subjects set sbj_name='待处理财产损益' where sbj_number = '1901';
ALTER TABLE `stock` ADD `status_scrap` INT NOT NULL COMMENT '报废后，是否被卖出变现' ;
ALTER TABLE `bank` ADD `client_id` INT NOT NULL AFTER `name`;
ALTER TABLE `cash` ADD `client_id` INT NOT NULL AFTER `name`;
ALTER TABLE `stock` ADD `date_a` VARCHAR(16) NOT NULL COMMENT '摊销折旧起始日期' AFTER `status_scrap`;

CREATE TABLE IF NOT EXISTS `project_b` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(512) NOT NULL,
  `memo` varchar(1024) NOT NULL,
  `status` int(11) NOT NULL,
  `create_at` varchar(16) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE IF NOT EXISTS `project_long` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(512) NOT NULL,
  `memo` varchar(1024) NOT NULL,
  `status` int(11) NOT NULL,
  `create_at` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- 2015年12月8日16:42:41
ALTER TABLE `bank` CHANGE `status_id` `status_id` TINYINT(4) NOT NULL DEFAULT '1' COMMENT '1:已经生成凭证 ';

-- 2015年12月10日15:20:56
INSERT INTO `department` ( `name`, `type`, `memo`) VALUES ('管理部门', '2', '管理部门');

-- 2015年12月15日17:08:18

ALTER TABLE `bank` CHANGE `amount` `amount` DECIMAL(12,2) NOT NULL COMMENT '金额';
ALTER TABLE `cash` CHANGE `amount` `amount` DECIMAL(12,2) NOT NULL COMMENT '金额';

-- 2015年12月22日15:32:02
ALTER TABLE `transition` ADD `entry_forward` TINYINT NOT NULL COMMENT '是否已经生成结转凭证' AFTER `entry_settlement`;
ALTER TABLE `employee` CHANGE `base` `base` DECIMAL(12,2) NOT NULL DEFAULT '0' COMMENT '社保基数';
ALTER TABLE `employee` CHANGE `base_2` `base_2` DECIMAL(12,2) NULL DEFAULT '0' COMMENT '公积金基数';

-- 2015年12月29日17:07:34

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `account_test`
--

-- --------------------------------------------------------

--
-- Table structure for table `auth_assignment`
--

CREATE TABLE `auth_assignment` (
  `user` varchar(64) NOT NULL,
  `role` varchar(64) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Table structure for table `auth_category`
--

CREATE TABLE `auth_category` (
  `id` int(11) NOT NULL,
  `name` varchar(64) NOT NULL,
  `description` varchar(128) DEFAULT NULL,
  `type` int(11) NOT NULL,
  `sort_num` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `auth_category`
--

INSERT INTO `auth_category` (`id`, `name`, `description`, `type`, `sort_num`) VALUES
(1, 'condom', '总账模块', 0, 0),
(2, 'bank', '银行模块', 0, 0),
(3, 'cash', '现金模块', 0, 0),
(4, 'report', '报表模块', 0, 0),
(5, 'purchase', '采购模块', 0, 0),
(6, 'product', '销售模块', 0, 0),
(7, 'transition', '凭证管理', 0, 0),
(8, 'stock_1601', '长期资产', 0, 0),
(9, 'employee', '员工模块', 0, 0),
(10, 'permission', '权限设置', 0, 0);

-- --------------------------------------------------------

--
-- Table structure for table `auth_permission`
--

CREATE TABLE `auth_permission` (
  `id` varchar(64) NOT NULL,
  `category` varchar(64) NOT NULL DEFAULT 'controller',
  `name` varchar(64) NOT NULL,
  `description` varchar(128) DEFAULT NULL,
  `form` int(11) NOT NULL DEFAULT '0',
  `options` text,
  `default_value` mediumtext,
  `rule` varchar(64) DEFAULT NULL,
  `sort_num` int(11) NOT NULL DEFAULT '0',
  `sort` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `auth_permission`
--

INSERT INTO `auth_permission` (`id`, `category`, `name`, `description`, `form`, `options`, `default_value`, `rule`, `sort_num`, `sort`) VALUES
('Bank/delete', 'bank', '删除', '', 0, '', '', '', 3, 0),
('Bank/update', 'bank', '修改', '', 0, '', '', '', 2, 0),
('Cash/delete', 'cash', '删除', '', 0, '', '', '', 3, 0),
('Cash/update', 'cash', '修改', '', 0, '', '', '', 2, 0),
('department', 'employee', '部门管理', NULL, 0, NULL, NULL, NULL, 0, 0),
('employee', 'employee', '员工管理', '', 0, '', '', '', 3, 0),
('option/index', 'condom', '账套信息', '', 0, '', '', '', 0, 0),
('permission', 'permission', '修改权限', '', 0, '', '', '', 0, 0),
('product/delete', 'product', '删除', NULL, 0, NULL, NULL, NULL, 3, 0),
('product/stock', 'product', '成本结转', NULL, 0, NULL, NULL, NULL, 0, 0),
('product/update', 'product', '修改', NULL, 0, NULL, NULL, NULL, 2, 0),
('projectB', 'stock_1601', '在建工程', NULL, 0, NULL, NULL, NULL, 0, 0),
('projectLong', 'stock_1601', '长期待摊管理', NULL, 0, NULL, NULL, NULL, 0, 0),
('purchase/delete', 'purchase', '删除', NULL, 0, NULL, NULL, NULL, 3, 0),
('purchase/update', 'purchase', '修改', NULL, 0, NULL, NULL, NULL, 2, 0),
('report/balance', 'report', '资产负债表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/client', 'report', '客户表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/department', 'report', '部门表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/detail', 'report', '明细表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/money', 'report', '现金流量表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/profit', 'report', '损益表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/subjects', 'report', '科目余额表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/vendor', 'report', '供应商表', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/admin1701', 'stock_1601', '无形资产', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/balance_1601', 'stock_1601', '期初明细', NULL, 0, NULL, NULL, NULL, 0, 0),
('subjects', 'condom', '科目表管理', '', 0, '', '', '', 0, 0),
('subjects/balance', 'condom', '总账期初余额', '', 0, '', '', '', 0, 0),
('Transition/bank', 'bank', '银行导入', '', 0, '', '', '', 1, 0),
('Transition/cash', 'cash', '现金导入', '', 0, '', '', '', 1, 0),
('Transition/listAntiSettlement', 'condom', '反结账', '', 0, '', '', '', 6, 6),
('Transition/listClosing', 'condom', '结账', '', 0, '', '', '', 5, 5),
('Transition/listPost', 'condom', '过账', '', 0, '', '', '', 3, 3),
('Transition/listReorganise', 'transition', '整理凭证', '', 0, '', '', '', 0, 0),
('Transition/listSettlement', 'condom', '期末结转', '', 0, '', '', '', 4, 4),
('transition/printp', 'transition', '打印凭证', NULL, 0, NULL, NULL, NULL, 0, 0),
('Transition/purchase', 'purchase', '导入', '', 0, '', '', '', 1, 0),
('transition/reimburse', 'employee', '员工报销', NULL, 0, NULL, NULL, NULL, 0, 0),
('transition/review', 'transition', '审核凭证', NULL, 0, NULL, NULL, NULL, 0, 0),
('transition/salary', 'employee', '员工工资', NULL, 0, NULL, NULL, NULL, 0, 0),
('Transition/sale', 'product', '导入', '', 0, '', '', '', 1, 0),
('transition/unreview', 'transition', '取消审核', NULL, 0, NULL, NULL, NULL, 0, 0);

-- --------------------------------------------------------

--
-- Table structure for table `auth_relation`
--

CREATE TABLE `auth_relation` (
  `user_id` int(11) NOT NULL,
  `role` varchar(64) NOT NULL,
  `permission` varchar(64) NOT NULL,
  `value` varchar(128) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `auth_assignment`
--
ALTER TABLE `auth_assignment`
  ADD PRIMARY KEY (`user`,`role`);

--
-- Indexes for table `auth_category`
--
ALTER TABLE `auth_category`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `auth_permission`
--
ALTER TABLE `auth_permission`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `auth_relation`
--
ALTER TABLE `auth_relation`
  ADD PRIMARY KEY (`user_id`,`permission`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `auth_category`
--
ALTER TABLE `auth_category`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;

ALTER TABLE `subjects` CHANGE `sbj_name` `sbj_name` VARCHAR(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
-- 2016年1月15日16:05:48
-- phpMyAdmin SQL Dump
-- version 4.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Jan 15, 2016 at 04:03 PM
-- Server version: 10.1.8-MariaDB
-- PHP Version: 5.6.16

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `account_201512237570`
--

-- --------------------------------------------------------

--
-- Table structure for table `auth_permission`
--

DROP TABLE IF EXISTS `auth_permission`;
CREATE TABLE `auth_permission` (
  `id` varchar(64) NOT NULL,
  `category` varchar(64) NOT NULL DEFAULT 'controller',
  `name` varchar(64) NOT NULL,
  `description` varchar(128) DEFAULT NULL,
  `form` int(11) NOT NULL DEFAULT '0',
  `options` text,
  `default_value` mediumtext,
  `rule` varchar(64) DEFAULT NULL,
  `sort_num` int(11) NOT NULL DEFAULT '0',
  `sort` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `auth_permission`
--

INSERT INTO `auth_permission` (`id`, `category`, `name`, `description`, `form`, `options`, `default_value`, `rule`, `sort_num`, `sort`) VALUES
('Bank/delete', 'bank', '删除', '', 0, '', '', '', 3, 0),
('Bank/update', 'bank', '修改', '', 0, '', '', '', 2, 0),
('Cash/delete', 'cash', '删除', '', 0, '', '', '', 3, 0),
('Cash/update', 'cash', '修改', '', 0, '', '', '', 2, 0),
('client', 'product', '客户管理', NULL, 1, NULL, NULL, NULL, 0, 0),
('department', 'employee', '部门管理', NULL, 0, NULL, NULL, NULL, 0, 0),
('employee', 'employee', '员工管理', '', 0, '', '', '', 3, 0),
('option/index', 'condom', '账套信息', '', 0, '', '', '', 0, 0),
('permission', 'permission', '修改权限', '', 0, '', '', '', 0, 0),
('product/delete', 'product', '删除', NULL, 1, NULL, NULL, NULL, 3, 0),
('product/stock', 'product', '成本结转', NULL, 0, NULL, NULL, NULL, 0, 0),
('product/update', 'product', '修改', NULL, 1, NULL, NULL, NULL, 2, 0),
('projectB', 'stock_1601', '在建工程', NULL, 0, NULL, NULL, NULL, 0, 0),
('projectLong', 'stock_1601', '长期待摊管理', NULL, 0, NULL, NULL, NULL, 0, 0),
('purchase/delete', 'purchase', '删除', NULL, 1, NULL, NULL, NULL, 3, 0),
('purchase/update', 'purchase', '修改', NULL, 1, NULL, NULL, NULL, 2, 0),
('report/balance', 'report', '资产负债表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/client', 'report', '客户表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/department', 'report', '部门表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/detail', 'report', '明细表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/money', 'report', '现金流量表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/profit', 'report', '损益表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/subjects', 'report', '科目余额表', NULL, 0, NULL, NULL, NULL, 0, 0),
('report/vendor', 'report', '供应商表', NULL, 0, NULL, NULL, NULL, 0, 0),
('salary', 'employee', '员工工资', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/admin', 'stock_1601', '库存商品', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/admin1601', 'stock_1601', '固定资产', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/admin1701', 'stock_1601', '无形资产', NULL, 0, NULL, NULL, NULL, 0, 0),
('stock/balance_1601', 'stock_1601', '期初明细', NULL, 0, NULL, NULL, NULL, 0, 0),
('subjects', 'condom', '科目表管理', '', 0, '', '', '', 0, 0),
('subjects/balance', 'condom', '总账期初余额', '', 0, '', '', '', 0, 0),
('Transition/bank', 'bank', '银行导入', '', 0, '', '', '', 1, 0),
('Transition/cash', 'cash', '现金导入', '', 0, '', '', '', 1, 0),
('transition/create', 'transition', '往来调整', NULL, 0, NULL, NULL, NULL, 0, 0),
('Transition/listAntiSettlement', 'condom', '反结账', '', 0, '', '', '', 6, 6),
('Transition/listClosing', 'condom', '结账', '', 0, '', '', '', 5, 5),
('Transition/listPost', 'condom', '过账', '', 0, '', '', '', 3, 3),
('Transition/listReorganise', 'transition', '整理凭证', '', 0, '', '', '', 0, 0),
('Transition/listSettlement', 'condom', '期末结转', '', 0, '', '', '', 4, 4),
('transition/printp', 'transition', '打印凭证', NULL, 0, NULL, NULL, NULL, 0, 0),
('Transition/purchase', 'purchase', '导入', '', 1, '', '', '', 1, 0),
('transition/reimburse', 'employee', '员工报销', NULL, 0, NULL, NULL, NULL, 0, 0),
('transition/review', 'transition', '审核凭证', NULL, 0, NULL, NULL, NULL, 0, 0),
('Transition/sale', 'product', '导入', '', 1, '', '', '', 1, 0),
('transition/unreview', 'transition', '取消审核', NULL, 0, NULL, NULL, NULL, 0, 0),
('vendor', 'purchase', '供应商管理', NULL, 1, NULL, NULL, NULL, 0, 0);

--
-- Indexes for dumped tables
--

--
-- Indexes for table `auth_permission`
--
ALTER TABLE `auth_permission`
  ADD PRIMARY KEY (`id`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;


-- 2016年1月15日10:33:49
ALTER TABLE `bank` ADD `entry_transaction` TINYINT NOT NULL COMMENT '支出或收入' AFTER `type`;
ALTER TABLE `cash` ADD `entry_transaction` TINYINT NOT NULL COMMENT '支出或收入' AFTER `type`;
UPDATE `bank` SET `entry_transaction` = '2' WHERE `path` like '=>收入%';
UPDATE `bank` SET `entry_transaction` = '1' WHERE `path` like '=>支出%';
ALTER TABLE `stock` ADD `month_left` INT NULL COMMENT '剩余计提月份' AFTER `value_month`;

-- 2016年2月25日15:00:47
ALTER TABLE `product` ADD `realorder` VARCHAR(64) NULL COMMENT '客户自己的订单号' AFTER `order_no`;


-- 2016年3月1日16:57:38
ALTER TABLE `post` CHANGE `balance` `balance` DOUBLE NOT NULL COMMENT '科目余额，非期初余额';
ALTER TABLE `subjects` ADD `sbj_name_en` VARCHAR(512) NULL AFTER `sbj_name`;

-- 2016年3月4日23:15:22

UPDATE `subjects` SET `sbj_name_en` = sbj_name where sbj_name_en is null;

UPDATE `subjects` SET `sbj_name_en`='Current assets' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '流动资产';
UPDATE `subjects` SET `sbj_name_en`='Cash and cash equivalents' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '货币资金';
UPDATE `subjects` SET `sbj_name_en`='Cash on hand' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '库存现金';
UPDATE `subjects` SET `sbj_name_en`='Cash in bank' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '银行存款';
UPDATE `subjects` SET `sbj_name_en`='Other cash and cash equivalents' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他货币资金';
UPDATE `subjects` SET `sbj_name_en`='Short-term investments' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '短期投资';
UPDATE `subjects` SET `sbj_name_en`='Short-term investments falling price reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '短期投资跌价准备';
UPDATE `subjects` SET `sbj_name_en`='Account receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收款';
UPDATE `subjects` SET `sbj_name_en`='Note receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收票据';
UPDATE `subjects` SET `sbj_name_en`='Bank acceptance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '银行承兑汇票';
UPDATE `subjects` SET `sbj_name_en`='Trade acceptance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商业承兑汇票';
UPDATE `subjects` SET `sbj_name_en`='Dividend receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收股利';
UPDATE `subjects` SET `sbj_name_en`='Interest receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收利息';
UPDATE `subjects` SET `sbj_name_en`='Account receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收账款';
UPDATE `subjects` SET `sbj_name_en`='Other notes receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他应收款';
UPDATE `subjects` SET `sbj_name_en`='Bad debt reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '坏账准备';
UPDATE `subjects` SET `sbj_name_en`='Advance money' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '预付账款';
UPDATE `subjects` SET `sbj_name_en`='Cover deficit by state subsidies of receivable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应收补贴款';
UPDATE `subjects` SET `sbj_name_en`='Inventories' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '库存资产';
UPDATE `subjects` SET `sbj_name_en`='Supplies purchasing' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '物资采购';
UPDATE `subjects` SET `sbj_name_en`='Raw materials' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '原材料';
UPDATE `subjects` SET `sbj_name_en`='Wrappage' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '包装物';
UPDATE `subjects` SET `sbj_name_en`='Low-value consumption goods' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '低值易耗品';
UPDATE `subjects` SET `sbj_name_en`='Materials cost variance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '材料成本差异';
UPDATE `subjects` SET `sbj_name_en`='Semi-Finished goods' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '自制半成品';
UPDATE `subjects` SET `sbj_name_en`='Finished goods' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '库存商品';
UPDATE `subjects` SET `sbj_name_en`='Differences between purchasing and selling price' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商品进销差价';
UPDATE `subjects` SET `sbj_name_en`='Work in process - outsourced' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '委托加工物资';
UPDATE `subjects` SET `sbj_name_en`='Trust to and sell the goods on a commission basis' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '委托代销商品';
UPDATE `subjects` SET `sbj_name_en`='Commissioned and sell the goods on a commission basis' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '受托代销商品';
UPDATE `subjects` SET `sbj_name_en`='Inventory falling price reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '存货跌价准备';
UPDATE `subjects` SET `sbj_name_en`='Collect money and send out the goods by stages' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '分期收款发出商品';
UPDATE `subjects` SET `sbj_name_en`='Deferred and prepaid expenses' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '待摊费用';
UPDATE `subjects` SET `sbj_name_en`='Long-term investment' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期投资';
UPDATE `subjects` SET `sbj_name_en`='Long-term investment on stocks' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期股权投资';
UPDATE `subjects` SET `sbj_name_en`='Long-term investment on bonds' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期债权投资';
UPDATE `subjects` SET `sbj_name_en`='Long-term investments depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期投资减值准备';
UPDATE `subjects` SET `sbj_name_en`='Entrust loans' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '委托贷款';
UPDATE `subjects` SET `sbj_name_en`='Fixed assets' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '固定资产';
UPDATE `subjects` SET `sbj_name_en`='Building' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '房屋';
UPDATE `subjects` SET `sbj_name_en`='Structure' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '建筑物';
UPDATE `subjects` SET `sbj_name_en`='Machinery equipment' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '机器设备';
UPDATE `subjects` SET `sbj_name_en`='Transportation facilities' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '运输设备';
UPDATE `subjects` SET `sbj_name_en`='Instruments and implement' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '工具器具';
UPDATE `subjects` SET `sbj_name_en`='Accumulated depreciation' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '累计折旧';
UPDATE `subjects` SET `sbj_name_en`='Fixed assets depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '固定资产减值准备';
UPDATE `subjects` SET `sbj_name_en`='Building/structure depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '房屋、建筑物减值准备';
UPDATE `subjects` SET `sbj_name_en`='Machinery equipment depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '机器设备减值准备';
UPDATE `subjects` SET `sbj_name_en`='Project goods and material' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '工程物资';
UPDATE `subjects` SET `sbj_name_en`='Construction-in-process' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '在建工程';
UPDATE `subjects` SET `sbj_name_en`='Erection works' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '安装工程';
UPDATE `subjects` SET `sbj_name_en`='Erecting equipment-in-process' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '在安装设备';
UPDATE `subjects` SET `sbj_name_en`='Technical innovation project' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '技术改造工程';
UPDATE `subjects` SET `sbj_name_en`='General overhaul project' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '大修理工程';
UPDATE `subjects` SET `sbj_name_en`='Construction-in-process depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '在建工程减值准备';
UPDATE `subjects` SET `sbj_name_en`='Liquidation of fixed assets' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '固定资产清理';
UPDATE `subjects` SET `sbj_name_en`='Intangible assets' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '无形资产';
UPDATE `subjects` SET `sbj_name_en`='Patents' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '专利权';
UPDATE `subjects` SET `sbj_name_en`='Non-Patents' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '非专利技术';
UPDATE `subjects` SET `sbj_name_en`='Trademarks, Trade names' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商标权';
UPDATE `subjects` SET `sbj_name_en`='Copyrights' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '著作权';
UPDATE `subjects` SET `sbj_name_en`='Tenure' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '土地使用权';
UPDATE `subjects` SET `sbj_name_en`='Goodwill' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商誉';
UPDATE `subjects` SET `sbj_name_en`='Intangible Assets depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '无形资产减值准备';
UPDATE `subjects` SET `sbj_name_en`='Patent rights depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '专利权减值准备';
UPDATE `subjects` SET `sbj_name_en`='trademark rights depreciation reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商标权减值准备';
UPDATE `subjects` SET `sbj_name_en`='Unacknowledged financial charges' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '未确认融资费用';
UPDATE `subjects` SET `sbj_name_en`='Wait deal assets loss or income' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '待处理财产损溢';
UPDATE `subjects` SET `sbj_name_en`='Long-term deferred and prepaid expenses' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期待摊费用';
UPDATE `subjects` SET `sbj_name_en`='Wait deal assets loss or income' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '待处理财产损溢';
UPDATE `subjects` SET `sbj_name_en`='Short-term borrowing' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '短期借款';
UPDATE `subjects` SET `sbj_name_en`='Notes payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付票据';
UPDATE `subjects` SET `sbj_name_en`='Bank acceptance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '银行承兑汇票';
UPDATE `subjects` SET `sbj_name_en`='Trade acceptance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '商业承兑汇票';
UPDATE `subjects` SET `sbj_name_en`='Account payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付账款';
UPDATE `subjects` SET `sbj_name_en`='Deposit received' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '预收账款';
UPDATE `subjects` SET `sbj_name_en`='Proxy sale goods revenue' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '代销商品款';
UPDATE `subjects` SET `sbj_name_en`='Accrued wages' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付工资';
UPDATE `subjects` SET `sbj_name_en`='Accrued welfarism' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付福利费';
UPDATE `subjects` SET `sbj_name_en`='Dividends payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付股利';
UPDATE `subjects` SET `sbj_name_en`='Tax payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应交税金';
UPDATE `subjects` SET `sbj_name_en`='Other fund in conformity with paying' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他应交款';
UPDATE `subjects` SET `sbj_name_en`='Other payables' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他应付款';
UPDATE `subjects` SET `sbj_name_en`='Drawing expense in advance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '预提费用';
UPDATE `subjects` SET `sbj_name_en`='Other liabilities' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他负债';
UPDATE `subjects` SET `sbj_name_en`='Pending changerover assets value' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '待转资产价值';
UPDATE `subjects` SET `sbj_name_en`='Anticipation liabilities' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '预计负债';
UPDATE `subjects` SET `sbj_name_en`='Long-term Liabilities' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期负债';
UPDATE `subjects` SET `sbj_name_en`='Long-term loans' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期借款';
UPDATE `subjects` SET `sbj_name_en`='Bonds payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '应付债券';
UPDATE `subjects` SET `sbj_name_en`='Long-term account payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '长期应付款';
UPDATE `subjects` SET `sbj_name_en`='Special payable' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '专项应付款';
UPDATE `subjects` SET `sbj_name_en`='Deferral taxes' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '递延税款';
UPDATE `subjects` SET `sbj_name_en`='Capita' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '资本';
UPDATE `subjects` SET `sbj_name_en`='Paid-up capital(or stock)' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '实收资本(或股本)';
UPDATE `subjects` SET `sbj_name_en`='Paicl-up capital' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '实收资本';
UPDATE `subjects` SET `sbj_name_en`='Paid-up stock' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '实收股本';
UPDATE `subjects` SET `sbj_name_en`='Investment Returned' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '已归还投资';
UPDATE `subjects` SET `sbj_name_en`='Capital reserve' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '资本公积';
UPDATE `subjects` SET `sbj_name_en`='Surplus reserves' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '盈余公积';
UPDATE `subjects` SET `sbj_name_en`='Profits' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '利润';
UPDATE `subjects` SET `sbj_name_en`='Current year profits' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '本年利润';
UPDATE `subjects` SET `sbj_name_en`='Profit distribution' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '利润分配';
UPDATE `subjects` SET `sbj_name_en`='Cost of manufacture' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '生产成本';
UPDATE `subjects` SET `sbj_name_en`='Manufacturing overhead' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '制造费用';
UPDATE `subjects` SET `sbj_name_en`='Materials' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '材料费';
UPDATE `subjects` SET `sbj_name_en`='Executive Salaries' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '管理人员工资';
UPDATE `subjects` SET `sbj_name_en`='Wages' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '奖金';
UPDATE `subjects` SET `sbj_name_en`='Retirement allowance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '退职金';
UPDATE `subjects` SET `sbj_name_en`='Bonus' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '补贴';
UPDATE `subjects` SET `sbj_name_en`='Outsourcing fee' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '外保劳务费';
UPDATE `subjects` SET `sbj_name_en`='Employee benefits/welfare' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '福利费';
UPDATE `subjects` SET `sbj_name_en`='Coferemce' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '会议费';
UPDATE `subjects` SET `sbj_name_en`='Special duties' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '加班餐费';
UPDATE `subjects` SET `sbj_name_en`='Business traveling' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '市内交通费';
UPDATE `subjects` SET `sbj_name_en`='Correspondence' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '通讯费';
UPDATE `subjects` SET `sbj_name_en`='Correspondence' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '电话费';
UPDATE `subjects` SET `sbj_name_en`='Water and Steam' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '水电取暖费';
UPDATE `subjects` SET `sbj_name_en`='Taxes and dues' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '税费';
UPDATE `subjects` SET `sbj_name_en`='Rent' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '租赁费';
UPDATE `subjects` SET `sbj_name_en`='Maintenance' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '管理费';
UPDATE `subjects` SET `sbj_name_en`='Service costs' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '劳务成本';
UPDATE `subjects` SET `sbj_name_en`='Income' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '收入';
UPDATE `subjects` SET `sbj_name_en`='OPERATING INCOME' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '业务收入';
UPDATE `subjects` SET `sbj_name_en`='Prime operating revenue' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '主营业务收入';
UPDATE `subjects` SET `sbj_name_en`='Other operating revenue' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他业务收入';
UPDATE `subjects` SET `sbj_name_en`='Investment income' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '投资收益';
UPDATE `subjects` SET `sbj_name_en`='Subsidize revenue' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '补贴收入';
UPDATE `subjects` SET `sbj_name_en`='NON-OPERATING INCOME' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '营业外收入';
UPDATE `subjects` SET `sbj_name_en`='Operating costs' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '主营业务成本';
UPDATE `subjects` SET `sbj_name_en`='Tax and associate charge' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '主营业务税金及附加';
UPDATE `subjects` SET `sbj_name_en`='Other business expense' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '其他业务支出';
UPDATE `subjects` SET `sbj_name_en`='Operating expenses' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '营业费用';
UPDATE `subjects` SET `sbj_name_en`='Adminisstrative expenses' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '管理费用';
UPDATE `subjects` SET `sbj_name_en`='Finance charge' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '财务费用';
UPDATE `subjects` SET `sbj_name_en`='Nonbusiness expenditure' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '营业外支出';
UPDATE `subjects` SET `sbj_name_en`='Income tax' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '所得税';

UPDATE `subjects` SET `sbj_name_en`=	'Financial Liabilities Held for Trading' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '交易性金融负债';
UPDATE `subjects` SET `sbj_name_en`=	'Transactional financial assets' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '交易性金融资产';
UPDATE `subjects` SET `sbj_name_en`=	'Material Purchases' WHERE LENGTH(`sbj_number`) = 4 AND `sbj_name` = '材料采购';
UPDATE `subjects` SET `sbj_name_en`=	'Materials in Transit' where sbj_name = '在途物资' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Goods in Transit' where sbj_name = '发出商品' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Packaging and Low Value Consumables' where sbj_name = '包装物及低值易耗品' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Property under Capital Lease' where sbj_name = '融资租赁资产' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Hold-to-maturity Investment' where sbj_name = '持有至到期投资' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Provision for Hold-to-maturity Investment' where sbj_name = '持有至到期投资减值准备' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Available-for-sale Financial Assets' where sbj_name = '可供出售金融资产' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Provision for Long-term Investments' where sbj_name = '长期股权投资减值准备' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Investment Property' where sbj_name = '投资性房地产' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Long-term Receivables' where sbj_name = '长期应收款' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Accumulated Amortization' where sbj_name = '累计摊销' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Deferred Tax Assets' where sbj_name = '递延所得税资产' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Profit or Loss on Unsettled Assets' where sbj_name = '待处理财产损益' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Trading Financial Liabilities' where sbj_name = '交易性金融负债' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Employee benefits payable' where sbj_name = '应付职工薪酬' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Taxes payable' where sbj_name = '应交税费' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Interest payable' where sbj_name = '应付利息' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Deferred Revenue' where sbj_name = '递延收益' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Deferred Tax Liabilities' where sbj_name = '递延所得税负债' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'General Risk Provision' where sbj_name = '一般风险准备' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Treasury Stock' where sbj_name = '库存股' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Interest Revenue' where sbj_name = '利息收入' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Fees and Commission Income' where sbj_name = '手续费及佣金收入' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Premium Income' where sbj_name = '保费收入' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Rental Income' where sbj_name = '租赁收入' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Exchange Gains and Losses' where sbj_name = '汇兑损益' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Changes in Fair Value' where sbj_name = '公允价值变动损益' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Business Taxes and Surcharges' where sbj_name = '营业税金及附加' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Interest Expense' where sbj_name = '利息支出' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Fees and Commission Expenses' where sbj_name = '手续费及佣金支出' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Selling Expenses' where sbj_name = '销售费用' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Exploration Expenditure' where sbj_name = '勘探费用' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Impairment on Assets' where sbj_name = '资产减值损失' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Income Tax Expense' where sbj_name = '企业所得税费用' and LENGTH(`sbj_number`) = 4;
UPDATE `subjects` SET `sbj_name_en`=	'Prior Year Income Adjustment' where sbj_name = '以前年度损益调整' and LENGTH(`sbj_number`) = 4;



DELETE FROM `subjects` WHERE `sbj_name` = '应收分保账款' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '摊回保险责任准备金' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '摊回赔付支出' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '摊回分保费用' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '提取未到期责任准备金' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '提取保险责任准备金' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '赔付支出' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '保户红利支出' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '退保金' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '分出保费' and length(sbj_number) = 4;
DELETE FROM `subjects` WHERE `sbj_name` = '分保费用' and length(sbj_number) = 4;


-- 2016年3月26日11:41:23
ALTER TABLE `auth_category` ADD `status` INT NOT NULL AFTER `type`;
UPDATE `auth_category` SET `type` = '1' WHERE `auth_category`.`id` = 5;
UPDATE `auth_category` SET `type` = '1' WHERE `auth_category`.`id` = 6;
ALTER TABLE `auth_permission` ADD `type` INT NOT NULL COMMENT '类型，区分只有标准版才有的功能' AFTER `category`;
UPDATE `auth_permission` SET `type` = '1' WHERE `auth_permission`.`id` = 'transition/reimburse';

ALTER TABLE `yii2_start_users` ADD `condom_id` VARCHAR(512) NOT NULL AFTER `token`;

INSERT INTO `auth_permission` (`id`, `category`, `type`, `name`, `description`, `form`, `options`, `default_value`, `rule`, `sort_num`, `sort`) VALUES ('client/age', 'product', '1', '客户账龄', NULL, '1', NULL, NULL, NULL, '0', '0');


ALTER TABLE cost DROP FOREIGN KEY cost_ibfk_2;
ALTER TABLE `cost` CHANGE `subject` `subject` VARCHAR(16) NULL DEFAULT NULL;
ALTER TABLE post DROP FOREIGN KEY fk_subject_id;
ALTER TABLE `post` CHANGE `subject_id` `subject_id` VARCHAR(16) NOT NULL;
ALTER TABLE options DROP FOREIGN KEY options_ibfk_1;
ALTER TABLE `options` CHANGE `entry_subject` `entry_subject` VARCHAR(16) NOT NULL;
ALTER TABLE product DROP FOREIGN KEY product_ibfk_2;
ALTER TABLE `product` CHANGE `subject` `subject` VARCHAR(16) NULL DEFAULT NULL;
ALTER TABLE purchase DROP FOREIGN KEY purchase_ibfk_2;
ALTER TABLE `purchase` CHANGE `subject` `subject` VARCHAR(16) NULL DEFAULT NULL;
ALTER TABLE salary DROP FOREIGN KEY salary_ibfk_1;
ALTER TABLE `salary` CHANGE `subject` `subject` VARCHAR(16) NULL DEFAULT NULL;
ALTER TABLE stock DROP FOREIGN KEY stock_ibfk_3;
ALTER TABLE `stock` CHANGE `entry_subject` `entry_subject` VARCHAR(16) NOT NULL;
ALTER TABLE  transition DROP FOREIGN KEY transition_ibfk_1;
ALTER TABLE `transition` CHANGE `entry_subject` `entry_subject` VARCHAR(16) NOT NULL;

ALTER TABLE `subjects` CHANGE `sbj_number` `sbj_number` VARCHAR(16) NOT NULL DEFAULT '0';

